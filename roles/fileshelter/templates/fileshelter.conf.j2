# Fileshelter configuration file

# Working directory (must have write privileges)
working-dir = "{{ fileshelter_workingdir }}";

# Log files, empty means stderr
log-file = "";
access-log-file = "";
# Logger configuration, see log-config in https://webtoolkit.eu/wt/doc/reference/html/overview.html#config_general
log-config = "* -debug -info:WebRequest";

# Default validity duration for a share. must be greater than 0
default-validity-days = 7;
# Set if a user can define the validity duration for its share.
user-defined-validy-days = true;
# Max validity duration for a share, in days. Must be greater than 0
max-validity-days = {{ fileshelter_maxvaliditydays }};

# Maximum total share size, in megabytes
max-share-size = "{{ fileshelter_maxsharesize }}";

# Required password to upload files. The user must provide one of the specified passwords to upload files
# Leave it empty if no password is required
# Ex:
# upload-passwords =
# (
#   "password1",
#   "password2"
# );
upload-passwords =
(
    {% for password in fileshelter_uploadpasswords %}
	"{{ proxy }}"{% if not loop.last %},{% endif %}
    {% endfor %}
);

# Listen port/addr of the web server
listen-port = {{ fileshelter_listenport }};
listen-addr = "{{ fileshelter_listenaddr }}";
behind-reverse-proxy = {{ fileshelter_behindreverseproxy }};
# original-ip-header and trusted-proxies are used only if behind-reverse-proxy is set to true
original-ip-header = "X-Forwarded-For";
trusted-proxies =
(
    {% for proxy in fileshelter_trustedproxies %}
	"{{ proxy }}"{% if not loop.last %},{% endif %}
    {% endfor %}
);

# If enabled, these files have to exist and have correct permissions set
tls-enable = false;
tls-cert = "/var/fileshelter/cert.pem";
tls-key = "/var/fileshelter/privkey.pem";
tls-dh = "/var/fileshelter/dh2048.pem";

# Application settings
app-name = "FileShelter";

# You may use your own ToSs by setting this
# tos-custom = "/path/to/some/tos.html"

# default ToS placeholders
tos-org = "{{ fileshelter_tosorg }}";
tos-url = "{{ fileshelter_tosurl }}";
tos-support-email = "{{ fileshelter_tossupportemail }}";

# Location for deployment
deploy-path = "/";

# Path to the resources used by the web interface
docroot = "/usr/share/fileshelter/docroot/;/resources,/css,/images,/js,/favicon.ico";
approot = "/usr/share/fileshelter/approot";
wt-resources = "/usr/share/Wt/resources";

# Bcrypt count parameter used to hash passwords (the higher the slower and the more robust)
# Changing this will make the shares currently protected by a password no longer available
bcrypt-count = 12;

# Number of threads to be used to dispatch http requests (0 means auto detect)
http-server-thread-count = 0;
